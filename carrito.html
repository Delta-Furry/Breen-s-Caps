<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carrito de Compras - BREEN’S CAPS</title>
  <link rel="stylesheet" href="estilos.css" />
  <link rel="icon" type="image/png" href="favicon.png">
  <style>
    body {
      background-color: #fff;
      color: #000;
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #000;
      color: #fff;
      padding: 20px;
      text-align: center;
    }

    .logo-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .logo {
      height: 60px;
    }

    nav ul {
      list-style: none;
      display: flex;
      justify-content: center;
      padding: 0;
      margin: 10px 0 0;
    }

    nav ul li {
      margin: 0 15px;
    }

    nav ul li a {
      color: #fff;
      text-decoration: none;
    }

    .carrito {
      padding: 20px;
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    table th, table td {
      border: 1px solid #000;
      padding: 10px;
    }

    .resumen-carrito {
      font-weight: bold;
      margin-bottom: 40px;
    }

    button {
      background-color: #000;
      color: #fff;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
    }

    input[type="text"], input[type="number"] {
      padding: 8px;
      width: 100%;
      box-sizing: border-box;
    }

    .formulario-envio {
      padding: 20px;
      background: #f1f1f1;
      margin: 40px auto;
      max-width: 600px;
      border-radius: 10px;
    }

    .formulario-envio h3 {
      text-align: center;
    }

    .formulario-envio label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }

    .info-contacto, .reloj-entrega {
      text-align: center;
      margin-top: 40px;
    }

    .mapa {
      margin: 30px auto;
      width: 100%;
      max-width: 600px;
    }

    footer {
      background-color: #000;
      color: #fff;
      padding: 15px;
      text-align: center;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-container">
      <img src="logo.png" alt="Logo de BREEN’S CAPS" class="logo" />
      <h1>BREEN’S CAPS</h1>
    </div>
    <nav>
      <ul class="nav-links">
        <li><a href="index.html">Inicio</a></li>
        <li><a href="index.html#mision">Misión</a></li>
        <li><a href="index.html#vision">Visión</a></li>
        <li><a href="catalogo.html">Catálogo</a></li>
        <li><a href="carrito.html">Carrito</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="carrito">
      <h2>Tu Carrito de Compras</h2>
      <div class="tabla-carrito">
        <table>
          <thead>
            <tr>
              <th>Producto</th>
              <th>Color</th>
              <th>Cantidad</th>
              <th>Precio Unitario</th>
              <th>Subtotal</th>
              <th>Eliminar</th>
            </tr>
          </thead>
          <tbody id="carrito-body">
            <!-- Productos se agregan aquí -->
          </tbody>
        </table>
      </div>
      <div class="resumen-carrito">
        <p>Total: $<span id="total-carrito">0</span> MXN</p>
        <button id="finalizar-compra">Finalizar Compra</button>
      </div>
    </section>

    <section class="formulario-envio">
      <h3>Datos de Entrega</h3>
      <label>Nombre completo:</label>
      <input type="text" placeholder="Nombre y Apellidos">
      <label>Dirección:</label>
      <input type="text" placeholder="Calle, Número, Colonia">
      <label>Código Postal:</label>
      <input type="text" placeholder="00000">
      <label>Estado:</label>
      <input type="text" placeholder="Estado">
      <label>Ciudad:</label>
      <input type="text" placeholder="Ciudad">
      <label>Teléfono:</label>
      <input type="text" placeholder="Teléfono de contacto">
    </section>

    <div class="reloj-entrega">
      <h3>Tiempo estimado de entrega</h3>
      <p id="cronometro">2 días 00:00:00</p>
    </div>

    <div class="mapa">
    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1880.2661654517349!2d-99.03492848919386!3d19.518746495541727!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d1fb3ad24f6a99%3A0x4a47a03e872d292f!2sAv.%20Carlos%20Hank%20Gonz%C3%A1lez%2050-loc%2065%20y%2066%2C%20Fuentes%20de%20Arag%C3%B3n%2C%2055248%20Ecatepec%20de%20Morelos%2C%20M%C3%A9x.!5e0!3m2!1ses-419!2smx!4v1749017788766!5m2!1ses-419!2smx" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>

    <div class="info-contacto">
      <p><strong>Dirección:</strong> Av. Carlos Hank González 50, Fuentes de Aragón, 55248 Ecatepec de Morelos, Méx.</p>
      <p><strong>Correo:</strong>breenscaps@gmail.com</p>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 BREEN’S CAPS. Todos los derechos reservados.</p>
  </footer>

  <script>
    function cargarCarrito() {
      const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      const tbody = document.getElementById('carrito-body');
      tbody.innerHTML = '';
      let total = 0;

      carrito.forEach((producto, index) => {
        const fila = document.createElement('tr');

        const celdaNombre = document.createElement('td');
        celdaNombre.textContent = producto.nombre;
        fila.appendChild(celdaNombre);

        const celdaColor = document.createElement('td');
        celdaColor.textContent = producto.color;
        fila.appendChild(celdaColor);

        const celdaCantidad = document.createElement('td');
        const inputCantidad = document.createElement('input');
        inputCantidad.type = 'number';
        inputCantidad.min = 1;
        inputCantidad.value = producto.cantidad || 1;
        inputCantidad.addEventListener('change', () => {
          producto.cantidad = parseInt(inputCantidad.value);
          carrito[index] = producto;
          localStorage.setItem('carrito', JSON.stringify(carrito));
          cargarCarrito();
        });
        celdaCantidad.appendChild(inputCantidad);
        fila.appendChild(celdaCantidad);

        const celdaPrecio = document.createElement('td');
        celdaPrecio.textContent = `$${producto.precio} MXN`;
        fila.appendChild(celdaPrecio);

        const subtotal = producto.precio * (producto.cantidad || 1);
        total += subtotal;
        const celdaSubtotal = document.createElement('td');
        celdaSubtotal.textContent = `$${subtotal} MXN`;
        fila.appendChild(celdaSubtotal);

        const celdaEliminar = document.createElement('td');
        const btnEliminar = document.createElement('button');
        btnEliminar.textContent = 'Eliminar';
        btnEliminar.addEventListener('click', () => {
          carrito.splice(index, 1);
          localStorage.setItem('carrito', JSON.stringify(carrito));
          cargarCarrito();
        });
        celdaEliminar.appendChild(btnEliminar);
        fila.appendChild(celdaEliminar);

        tbody.appendChild(fila);
      });

      document.getElementById('total-carrito').textContent = total;
    }

    function iniciarCronometro() {
      let tiempo = 2 * 24 * 60 * 60; // 2 días en segundos
      const cronometro = document.getElementById("cronometro");

      const intervalo = setInterval(() => {
        const dias = Math.floor(tiempo / (24 * 60 * 60));
        const horas = Math.floor((tiempo % (24 * 60 * 60)) / 3600);
        const minutos = Math.floor((tiempo % 3600) / 60);
        const segundos = tiempo % 60;

        cronometro.textContent = `${dias} días ${horas.toString().padStart(2, '0')}:${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}`;

        tiempo--;
        if (tiempo < 0) clearInterval(intervalo);
      }, 1000);
    }

    document.getElementById('finalizar-compra').addEventListener('click', () => {
      alert('¡Gracias por tu compra! Tu pedido llegará en un máximo de 2 días.');
      localStorage.removeItem('carrito');
      cargarCarrito();
      iniciarCronometro();
    });

    document.addEventListener('DOMContentLoaded', cargarCarrito);
  </script>
</body>
</html>
